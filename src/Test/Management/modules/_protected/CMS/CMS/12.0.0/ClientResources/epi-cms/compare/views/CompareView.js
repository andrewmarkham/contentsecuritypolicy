//>>built
define("epi-cms/compare/views/CompareView",["dojo/_base/declare","dojo/_base/lang","dojo/topic","epi-cms/contentediting/PageDataController","epi-cms/compare/CompareToolbar","epi-cms/compare/viewmodels/CompareViewModel"],function(_1,_2,_3,_4,_5,_6){return _1([_4],{iframeName:"compareView",buildRendering:function(){this.inherited(arguments);var _7=new _6(),_8=this.mainLayoutContainer,_9=new _5({region:"top",splitter:false,model:_7.compareToolbarViewModel});_8.addChild(_9);this.set("compareModel",_7);this.own(_7,_7.watch("leftVersionUri",_2.hitch(this,function(_a,_b,_c){this._changeContext(_c);})),_9,_9.on("versionInformationUpdated",function(){_8.layout();}),_3.subscribe("/epi/shell/action/changeview",this._onChangeView.bind(this)));},setView:function(_d,_e){_e=_2.mixin({model:this.compareModel},_e);return this.inherited(arguments,[_d,_e]);},_changeContext:function(_f){if(_f&&this._currentViewModel&&_f!==this._currentViewModel.contentData.uri){_3.publish("/epi/shell/context/request",{uri:_f},{sender:this});}},_refreshModel:function(_10,_11){this.inherited(arguments);this.compareModel.set({contentLink:_10.contentLink,typeIdentifier:_10.typeIdentifier,languages:_10.existingLanguageBranches});},_switchEditMode:function(){if(this.isActive){_3.publish("/epi/shell/action/changeview","formedit",null,null,true);}},_onChangeView:function(_12){if(_12==="sidebysidecompare"||_12==="allpropertiescompare"){this.compareModel.set("rightVersion",null);}}});});