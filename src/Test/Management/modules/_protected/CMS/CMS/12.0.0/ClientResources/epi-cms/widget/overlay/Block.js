//>>built
require({cache:{"url:epi-cms/widget/templates/Block.html":"<div class=\"dojoDndItem epi-overlay-block\">\r\n    <div data-dojo-attach-point=\"containerDomNode\"></div>\r\n    <span class=\"epi-personalized\" data-dojo-attach-point=\"iconsContainer\">\r\n        <span class=\"epi-overlayControls epi-mediumButton \">\r\n            <span class=\"dijitReset dijitInline dijitIcon epi-iconWarning\" data-dojo-attach-point=\"warningIcon\"></span>\r\n            <span class=\"dijitReset dijitInline dijitIcon epi-iconUsers\" data-dojo-attach-point=\"personalizedIcon\"></span>\r\n        </span>\r\n    </span>\r\n    <button class=\"epi-chromelessButton epi-overlayControls epi-settingsButton epi-mediumButton\" data-dojo-attach-point=\"settingsButton\" data-dojo-type=\"dijit/form/DropDownButton\" data-dojo-props=\"showLabel:false, title:'${res.settingstooltip}', iconClass:'epi-iconContextMenu'\">\r\n        <div data-dojo-attach-point=\"contextMenu\" data-dojo-type=\"epi/shell/widget/ContextMenu\"></div>\r\n    </button>\r\n</div>"}});define("epi-cms/widget/overlay/Block",["dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dojo/on","dojo/when","epi/shell/widget/overlay/_Base","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","epi-cms/widget/overlay/_OverlayItemInfoMixin","epi-cms/contentediting/command/ContentAreaCommands","epi-cms/ContentLanguageHelper","epi/i18n!epi/cms/nls/episerver.cms.widget.blockcontextmenu","dojo/text!../templates/Block.html","dijit/form/DropDownButton","epi/shell/widget/ContextMenu"],function(_1,_2,_3,_4,_5,on,_6,_7,_8,_9,_a,_b,_c,_d,_e){return _1([_7,_8,_9,_a],{templateString:_e,res:_d,_setMissingRendererAttr:function(_f){_4.toggle(this.domNode,"epi-overlay-item-missing-renderer",_f);},buildRendering:function(){this.inherited(arguments);_5.set(this.personalizedIcon,"display",this.viewModel.contentGroup?"":"none");},postCreate:function(){this.inherited(arguments);this._injectDynamicStyles();this.own(this.commandProvider=this.commandProvider||new _b({model:this.viewModel}),this.viewModel.watch("statusMessage",_3.hitch(this,function(_10,_11,_12){_6(_c.getMissingLanguageMessage(this.viewModel.content),_3.hitch(this,function(_13){_5.set(this.warningIcon,"display",_13?"":"none");}));_5.set(this.iconsContainer,"display",this.viewModel.contentGroup||_12?"":"none");})));this.viewModel.loadStatus();this.contextMenu.addProvider(this.commandProvider);if(this.blockInfo&&this.blockInfo.missingrenderer){this.set("missingRenderer",this.blockInfo.missingrenderer);}this.own(on(this.domNode,"click",_3.hitch(this.viewModel,"set","selected",true)),on(this.settingsButton,"click",_3.hitch(this,"_onContextMenuClick")),on(this.domNode,"mouseout",_3.hitch(this,function(e){if(this.contextMenu&&this.contextMenu.isShowingNow){_2.stop(e);}})));},_injectDynamicStyles:function(){var _14=this.sourceItemNode,_15=_5.get(_14,"display"),_16=/inline|inline-block/.test(_15)?"-inline":"";_4.add(_14,"epi-injected-minSize"+_16);},_onContextMenuClick:function(){this.commandProvider.set("model",this.viewModel);this.viewModel.set("selected",true);return false;}});});