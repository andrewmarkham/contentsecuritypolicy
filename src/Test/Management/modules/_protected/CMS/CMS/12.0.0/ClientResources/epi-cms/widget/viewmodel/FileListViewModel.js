//>>built
define("epi-cms/widget/viewmodel/FileListViewModel",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/Stateful","epi-cms/widget/UploadUtil","epi/i18n!epi/cms/nls/episerver.cms.widget.uploadmultiplefiles"],function(_1,_2,_3,_4,_5,_6){return _1([_4],{progress:null,uploadFiles:null,showProgressBar:false,_progressSetter:function(_7){this.progress=_7;var _8=this.get("uploadFiles");var _9=0;_8.forEach(function(_a){_9+=_a.size;if(_a.status===_6.uploadform.uploading&&_7.bytesLoaded>=_9){_a.status=_6.uploadform.uploaded;}},this);this.set("uploadFiles",_8);},_uploadFilesSetter:function(_b){if(!_5.validUploadFiles(_b)){return;}var _c=[];_2.forEach(_b,function(_d){_c.push({fileName:_d.name,size:_d.size,status:_6.uploadform.uploading});},this);this.uploadFiles=_c;},update:function(_e){if(!_e||_e.length===0){return;}var _f=this.get("uploadFiles");_e.forEach(function(_10){var _11=_2.filter(_f,function(_12){return _10.fileName===_12.fileName;})[0];_11.contentLink=_10.contentLink;if(_10.errorMessage){_11.status=_6.uploadform.failed;_11.statusMessage=_10.errorMessage;}else{_11.status=_6.uploadform.uploaded;}},this);this.set("uploadFiles",_f);},error:function(){var _13=this.get("uploadFiles");_2.forEach(_13,function(_14){_14.status=_6.uploadform.failed;_14.statusMessage=_6.uploadform.errormessage;});this.set("uploadFiles",_13);},clear:function(){this.set("uploadFiles",null);}});});