//>>built
define("epi/shell/dnd/Avatar",["dojo/_base/declare","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-attr","dijit/registry","dojo/dnd/common","dojox/html/entities"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1(null,{constructor:function(_9){this.manager=_9;this.construct();},construct:function(){this.isA11y=_3.contains(_2.body(),"dijit_a11y");var a=_4.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_a=this.manager.source,_b,_c=_4.create("tbody",null,a),_d=_4.create("tr",null,_c),_e=_4.create("td",null,_d),k=Math.min(5,this.manager.nodes.length),i=0,_f=_4.create("div",null,_e),div=_4.create("div",null,_f),_10=_4.create("div",null,_f),_11=_4.create("table",null,div),b=_4.create("tbody",null,_11);_5.set(_f,"class","epi-DndAvatarContainer");_5.set(_10,"class","epi-DndAvatarOverlay");_5.set(_11,"style",{width:"100%"});for(;i<k;++i){if(_a.creator){var _12=_a.getItem(this.manager.nodes[i].id).data;var _13=_a._normalizedCreator(_12,"avatar").node;var _14=_12.get?_12.get("name"):_12.name;if(typeof _14==="string"){_13.innerHTML=_8.encode(_14);}else{if(typeof _12==="string"){_13.innerHTML=_8.encode(_12);}}_b=_13;}else{_b=this.manager.nodes[i].cloneNode(true);if(_b.id){var _15=_6.byId(_b.id);if(_15&&_15.item&&_15.item.name){_b.innerHTML=_8.encode(_15.item.name);}}if(_b.tagName.toLowerCase()==="tr"){var _16=_4.create("table"),_17=_4.create("tbody",null,_16);_17.appendChild(_b);_b=_16;}}_b.id="";var tr=_4.create("tr",null,b);var td=_4.create("td",null,tr);td.appendChild(_b);_5.set(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}a.style.cursor="move";this.node=a;},destroy:function(){_4.destroy(this.node);this.node=false;},update:function(){_3.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);}});});